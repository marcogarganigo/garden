(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6995:(e,t,a)=>{"use strict";a.d(t,{default:()=>ec});var s=a(5155),r=a(8431),i=a(760),n=a(2115),l=a(9708),o=a(2085),c=a(2596),d=a(9688);function m(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,d.QP)((0,c.$)(t))}let x=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function u(e){let{className:t,variant:a,size:r,asChild:i=!1,...n}=e,o=i?l.DX:"button";return(0,s.jsx)(o,{"data-slot":"button",className:m(x({variant:a,size:r,className:t})),...n})}function h(e){let{className:t,type:a,...r}=e;return(0,s.jsx)("input",{type:a,"data-slot":"input",className:m("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...r})}let p=(0,o.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function g(e){let{className:t,variant:a,asChild:r=!1,...i}=e,n=r?l.DX:"span";return(0,s.jsx)(n,{"data-slot":"badge",className:m(p({variant:a}),t),...i})}var f=a(1497),v=a(3311),b=a(227),y=a(1154),j=a(3384);function N(e){return(0,s.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,s.jsxs)("svg",{role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[(0,s.jsx)("title",{children:"GitHub"}),(0,s.jsx)("path",{d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"})]})})}function w(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:m("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function k(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:m("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function P(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:m("leading-none font-semibold",t),...a})}function M(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:m("px-6",t),...a})}var A=a(6104),C=a(7037),S=a(3063),D=a(1931),z=a(9831),I=a(9929);function F(e){let{artist:t,index:a,onClick:i}=e,[l,o]=(0,n.useState)(!1),c=Number.parseInt(t.playcount),d=(e=>{if(e>=2e4)return{icon:A.A,size:"w-12 h-12",type:"Ancient Tree",color:"text-emerald-600",badge:"bg-emerald-500"};if(e>=1e4)return{icon:C.A,size:"w-12 h-12",type:"Mighty Oak",color:"text-green-600",badge:"bg-green-500"};if(e>=5e3)return{icon:S.A,size:"w-10 h-10",type:"Sunflower",color:"text-yellow-500",badge:"bg-yellow-400"};if(e>=2e3)return{icon:D.A,size:"w-9 h-9",type:"Tulip",color:"text-pink-500",badge:"bg-pink-400"};if(e>=1e3)return{icon:z.A,size:"w-9 h-9",type:"Rose",color:"text-rose-500",badge:"bg-rose-400"};else if(e>=500)return{icon:j.A,size:"w-8 h-8",type:"Fern",color:"text-lime-600",badge:"bg-lime-400"};else return{icon:I.A,size:"w-7 h-7",type:"Sprout",color:"text-amber-600",badge:"bg-amber-600"}})(c),m=d.icon,x="".concat(.1*a,"s");return(0,s.jsx)(r.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.3,delay:.05*a},whileHover:{scale:1.05,z:10},whileTap:{scale:.95},className:"relative cursor-pointer",onClick:i,children:(0,s.jsx)(w,{className:"group transition-all duration-500 hover:shadow-2xl hover:scale-105 border-0 bg-card/80 backdrop-blur-sm",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),style:{animationDelay:x},children:(0,s.jsxs)(M,{className:"p-4 text-center space-y-3",children:[(0,s.jsx)(r.P.div,{animate:l?{scale:1.15,rotate:2}:{scale:1,rotate:0},transition:{duration:.3},className:"flex justify-center",children:(0,s.jsx)(m,{className:"".concat(d.size," ").concat(d.color)})}),l&&(0,s.jsxs)("div",{className:"absolute inset-0 pointer-events-none",children:[(0,s.jsx)("div",{className:"absolute top-2 right-2 text-yellow-400 sparkle",children:"✨"}),(0,s.jsx)("div",{className:"absolute bottom-2 left-2 text-yellow-400 sparkle",style:{animationDelay:"0.5s"},children:"✨"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h3",{className:"font-semibold text-sm leading-tight text-card-foreground line-clamp-2",children:t.name}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(g,{variant:"secondary",className:"text-xs ".concat(d.badge," text-white border-0"),children:d.type}),(0,s.jsxs)("p",{className:"text-xs font-semibold text-muted-foreground",children:[c.toLocaleString()," plays"]})]})]}),(0,s.jsx)("div",{className:"w-full bg-muted rounded-full h-1.5 overflow-hidden",children:(0,s.jsx)("div",{className:"h-full bg-gradient-to-r from-accent to-secondary transition-all duration-1000 ease-out",style:{width:"".concat(Math.min(100,c/2e4*100),"%"),transitionDelay:x}})})]})})})}var _=a(9037),L=a(3109),E=a(1539),G=a(8619),T=a(8829),U=a(7695);function O(e){let t=(0,G.d)(0),a=(0,T.G)(t,e=>Math.round(e).toLocaleString());return(0,n.useEffect)(()=>{let a=e>1e4?.8:1.5;return(0,U.i)(t,e,{duration:a,ease:"easeInOut"}).stop},[t,e]),a}function Y(e){let{artists:t,userStats:a}=e,i=(null==a?void 0:a.totalPlays)||t.reduce((e,t)=>e+Number.parseInt(t.playcount),0),n=t[0],l=a?Math.round(a.totalPlays/a.artistCount):Math.round(i/t.length),o={trees:t.filter(e=>Number.parseInt(e.playcount)>=5e3).length,flowers:t.filter(e=>Number.parseInt(e.playcount)>=1e3&&5e3>Number.parseInt(e.playcount)).length,sprouts:t.filter(e=>1e3>Number.parseInt(e.playcount)).length},c=O(i),d=O(l),m=O(Number.parseInt((null==n?void 0:n.playcount)||"0")),x=O(o.trees),u=O(o.flowers),h=O(o.sprouts),p={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[(0,s.jsx)(r.P.div,{variants:p,initial:"hidden",animate:"visible",transition:{delay:.1,duration:.5},children:(0,s.jsxs)(w,{className:"border-0 bg-card/80 backdrop-blur-sm card-glow h-full",children:[(0,s.jsx)(k,{className:"pb-3",children:(0,s.jsxs)(P,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,s.jsx)(b.A,{className:"w-4 h-4"}),"Total Plays"]})}),(0,s.jsxs)(M,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-primary",children:(0,s.jsx)(r.P.span,{children:c})}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[a?"Entire profile":"Displayed artists"," • ~",Math.round(3.5*i/60)," hours"]})]})]})}),(0,s.jsx)(r.P.div,{variants:p,initial:"hidden",animate:"visible",transition:{delay:.2,duration:.5},children:(0,s.jsxs)(w,{className:"border-0 bg-card/80 backdrop-blur-sm card-glow h-full",children:[(0,s.jsx)(k,{className:"pb-3",children:(0,s.jsxs)(P,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,s.jsx)(_.A,{className:"w-4 h-4"}),"Top Artist"]})}),(0,s.jsxs)(M,{children:[(0,s.jsx)("div",{className:"text-lg font-bold text-secondary line-clamp-1",children:null==n?void 0:n.name}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:[(0,s.jsx)(r.P.span,{children:m})," plays"]})]})]})}),(0,s.jsx)(r.P.div,{variants:p,initial:"hidden",animate:"visible",transition:{delay:.3,duration:.5},children:(0,s.jsxs)(w,{className:"border-0 bg-card/80 backdrop-blur-sm card-glow h-full",children:[(0,s.jsx)(k,{className:"pb-3",children:(0,s.jsxs)(P,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,s.jsx)(L.A,{className:"w-4 h-4"}),"Average Plays"]})}),(0,s.jsxs)(M,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-accent",children:(0,s.jsx)(r.P.span,{children:d})}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Per artist ",a?"(".concat(a.artistCount.toLocaleString()," total)"):""]})]})]})}),(0,s.jsx)(r.P.div,{variants:p,initial:"hidden",animate:"visible",transition:{delay:.4,duration:.5},children:(0,s.jsxs)(w,{className:"border-0 bg-card/80 backdrop-blur-sm card-glow h-full",children:[(0,s.jsx)(k,{className:"pb-3",children:(0,s.jsxs)(P,{className:"text-sm font-medium text-muted-foreground flex items-center gap-2",children:[(0,s.jsx)(E.A,{className:"w-4 h-4"}),"Garden Composition"]})}),(0,s.jsx)(M,{children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-xs",children:"\uD83C\uDF33 Trees"}),(0,s.jsx)(g,{variant:"outline",className:"text-xs",children:(0,s.jsx)(r.P.span,{children:x})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-xs",children:"\uD83C\uDF3B Flowers"}),(0,s.jsx)(g,{variant:"outline",className:"text-xs",children:(0,s.jsx)(r.P.span,{children:u})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-xs",children:"\uD83C\uDF31 Sprouts"}),(0,s.jsx)(g,{variant:"outline",className:"text-xs",children:(0,s.jsx)(r.P.span,{children:h})})]})]})})]})})]})}function Z(e){var t,a;let{insights:r,topTracks:i,topAlbums:n}=e;r.explorationScore,r.loyaltyScore;let l=r.memberSince?Math.max(1,Math.floor((Date.now()-1e3*r.memberSince)/864e5)):1,o=(r.totalPlays/l).toFixed(2);return(0,s.jsx)("div",{className:"space-y-6 mt-8",children:(0,s.jsxs)("div",{className:"bg-card/50 backdrop-blur-sm rounded-xl p-6 border border-border/50",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 text-foreground",children:"\uD83D\uDCCA Profile Stats"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-center",children:[r.memberSince&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-primary",children:new Date().getFullYear()-new Date(1e3*r.memberSince).getFullYear()}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Years on Last.fm"}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:new Date(1e3*r.memberSince).toLocaleDateString()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-primary",children:o}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Avg plays/day"})]}),r.country&&(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-primary",children:r.country}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:"Country"})]})]})]})})}var R=a(4355),B=a(2713);function V(e){let{artists:t,topTracks:a,insights:i,username:l}=e,[o,c]=(0,n.useState)([{name:"Loading...",percentage:100,color:"bg-primary"}]),d=atob("NzM1ZjI5NGU5Y2FlZjdhNjJlZDNmMjUyNmU3ODExYmI=");(0,n.useEffect)(()=>{l&&m()},[l]);let m=async()=>{try{var e,t;let a=await fetch("https://ws.audioscrobbler.com/2.0/?method=user.gettoptracks&user=".concat(l,"&api_key=").concat(d,"&format=json&limit=20")),s=await a.json();if(s.error||!(null===(e=s.toptracks)||void 0===e?void 0:e.track))return;let r=s.toptracks.track,i=new Map;for(let e of r.slice(0,10))try{let a=await fetch("https://ws.audioscrobbler.com/2.0/?method=track.gettoptags&artist=".concat(encodeURIComponent(e.artist.name),"&track=").concat(encodeURIComponent(e.name),"&api_key=").concat(d,"&format=json")),s=await a.json();(null===(t=s.toptags)||void 0===t?void 0:t.tag)&&(Array.isArray(s.toptags.tag)?s.toptags.tag:[s.toptags.tag]).slice(0,3).forEach((e,t)=>{let a=3-t,s=e.name.toLowerCase();i.set(s,(i.get(s)||0)+a)})}catch(t){console.error("Error fetching tags for ".concat(e.name,":"),t)}let n=Array.from(i.entries()).sort((e,t)=>t[1]-e[1]).slice(0,4);if(n.length>0){let e=n.reduce((e,t)=>{let[,a]=t;return e+a},0),t=["bg-red-500","bg-blue-500","bg-green-500","bg-purple-500"],a=n.map((a,s)=>{let[r,i]=a;return{name:r.charAt(0).toUpperCase()+r.slice(1),percentage:Math.round(i/e*100),color:t[s]}});c(a)}}catch(e){console.error("Error fetching tracks and tags:",e)}};(()=>{let e=[],a=Math.floor(t.reduce((e,t)=>e+Number.parseInt(t.playcount),0)/364);for(let t=0;t<52;t++){let t=[];for(let e=0;e<7;e++){let e=Math.min(4,Math.max(0,Math.floor(a/50)+Math.floor(3*Math.random())));t.push(e)}e.push(t)}})();let x=(()=>{let e=[],a=t.length;for(let s=0;s<Math.min(10,a);s++){let a=t[s],r=Number.parseInt(a.playcount),i=Number.parseInt(t[0].playcount);e.push({artist:a.name,plays:r,percentage:r/i*100})}return e})(),u={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};return(0,s.jsxs)(r.P.div,{variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}},initial:"hidden",animate:"visible",className:"space-y-8",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h2",{className:"text-3xl font-serif font-bold text-primary mb-2",children:"\uD83D\uDCCA Garden Analytics"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Deep insights into your musical ecosystem"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsx)(r.P.div,{variants:u,children:(0,s.jsxs)(w,{className:"card-glow",children:[(0,s.jsxs)(k,{children:[(0,s.jsxs)(P,{className:"flex items-center gap-2",children:[(0,s.jsx)(R.A,{className:"w-5 h-5 text-secondary"}),"Musical Flower Petals"]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Top genres from your track tags"})]}),(0,s.jsxs)(M,{children:[(0,s.jsx)("div",{className:"relative w-64 h-64 mx-auto mb-6",children:(0,s.jsxs)("svg",{viewBox:"0 0 200 200",className:"w-full h-full transform -rotate-90",children:[o.map((e,t)=>{let a=o.slice(0,t).reduce((e,t)=>e+t.percentage,0),i=(a+e.percentage)/100*360,n=a/100*360*Math.PI/180,l=i*Math.PI/180,c=100+80*Math.cos(n),d=100+80*Math.sin(n),m=100+80*Math.cos(l),x=100+80*Math.sin(l),u=+(e.percentage>50),h=["M 100 100","L ".concat(c," ").concat(d),"A 80 80 0 ".concat(u," 1 ").concat(m," ").concat(x),"Z"].join(" "),p=e.color.includes("red")?"#ef4444":e.color.includes("blue")?"#3b82f6":e.color.includes("green")?"#22c55e":"#a855f7";return(0,s.jsx)(r.P.path,{d:h,fill:p,stroke:"white",strokeWidth:"2",initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:.5+.15*t,duration:.6,type:"spring",stiffness:100},className:"hover:opacity-80 transition-opacity cursor-pointer",style:{transformOrigin:"100px 100px"}},e.name)}),(0,s.jsx)(r.P.circle,{cx:"100",cy:"100",r:"35",fill:"white",stroke:"#e5e7eb",strokeWidth:"3",initial:{scale:0},animate:{scale:1},transition:{delay:1,duration:.5,type:"spring"}}),(0,s.jsx)(r.P.text,{x:"100",y:"110",textAnchor:"middle",fontSize:"28",initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2,duration:.5},children:"\uD83C\uDF38"})]})}),(0,s.jsx)("div",{className:"space-y-2",children:o.map(e=>(0,s.jsxs)(r.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.8+.1*o.indexOf(e),duration:.4},className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(e.color)}),(0,s.jsx)("span",{className:"text-sm",children:e.name})]}),(0,s.jsxs)(g,{variant:"outline",children:[e.percentage,"%"]})]},e.name))})]})]})}),(0,s.jsx)(r.P.div,{variants:u,children:(0,s.jsxs)(w,{className:"card-glow",children:[(0,s.jsxs)(k,{children:[(0,s.jsxs)(P,{className:"flex items-center gap-2",children:[(0,s.jsx)(B.A,{className:"w-5 h-5 text-primary"}),"Plant Diversity Spectrum"]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Distribution of your top artists"})]}),(0,s.jsx)(M,{children:(0,s.jsx)("div",{className:"space-y-4",children:x.slice(0,8).map((e,t)=>(0,s.jsxs)(r.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.8+.1*t,duration:.4},className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm font-medium truncate flex-1 mr-2",children:e.artist}),(0,s.jsx)(g,{variant:"secondary",className:"text-xs",children:e.plays.toLocaleString()})]}),(0,s.jsx)("div",{className:"w-full bg-muted rounded-full h-2",children:(0,s.jsx)(r.P.div,{initial:{width:0},animate:{width:"".concat(e.percentage,"%")},transition:{delay:1+.1*t,duration:1},className:"h-2 rounded-full ".concat(0===t?"bg-gradient-to-r from-yellow-400 to-orange-500":t<3?"bg-gradient-to-r from-green-400 to-blue-500":"bg-gradient-to-r from-purple-400 to-pink-500")})})]},e.artist))})})]})})]})]})}var X=a(7951),q=a(8186),H=a(8564);function $(e){let t=(0,G.d)(0),a=(0,T.G)(t,e=>Math.round(e).toLocaleString());return(0,n.useEffect)(()=>{let a=e>1e4?.8:1.5;return(0,U.i)(t,e,{duration:a,ease:"easeInOut"}).stop},[t,e]),a}function J(e){var t,a,i,n;let{totalPlays:l,artistCount:o,tracksCount:c,gardenSize:d,insights:m,userInfo:x}=e,u=e=>e<=1?0:e>100?98010:(e-1)*(e-1)*10,h=Math.floor(l/20)+2*o+c,p=Math.min(Math.floor(Math.sqrt(h/10))+1,100),f=u(p),b=u(p+1),y=h-f,j=b-f,N=p>=100?"\uD83C\uDF33 Master Gardener":p>=75?"\uD83C\uDF3A Expert Gardener":p>=50?"\uD83C\uDF3F Skilled Gardener":p>=25?"\uD83C\uDF31 Growing Gardener":"\uD83C\uDF30 New Gardener",k=(null==x?void 0:null===(a=x.image)||void 0===a?void 0:null===(t=a.find(e=>"large"===e.size))||void 0===t?void 0:t["#text"])||(null==x?void 0:null===(n=x.image)||void 0===n?void 0:null===(i=n.find(e=>"medium"===e.size))||void 0===i?void 0:i["#text"]),P=$(c),A=$(o),C=$(h),S=p<100?$(y):null,D=p<100?$(j):null;return(0,s.jsx)(w,{className:"card-glow border-0 shadow-xl mb-8",children:(0,s.jsxs)(M,{className:"p-6",children:[(0,s.jsxs)(r.P.div,{className:"flex items-center justify-between mb-4",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.5},children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[k?(0,s.jsx)("img",{src:k||"/placeholder.svg",alt:(null==x?void 0:x.name)||"User",className:"w-12 h-12 rounded-full border-2 border-primary/20"}):(0,s.jsx)("div",{className:"p-2 bg-primary/10 rounded-full",children:p>=100?(0,s.jsx)(X.A,{className:"w-6 h-6 text-primary"}):p>=75?(0,s.jsx)(q.A,{className:"w-6 h-6 text-primary"}):p>=50?(0,s.jsx)(H.A,{className:"w-6 h-6 text-primary"}):(0,s.jsx)(v.A,{className:"w-6 h-6 text-primary"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-xl font-serif font-bold text-primary",children:["Level ",p," Gardener"]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:N})]})]}),(0,s.jsx)(r.P.div,{whileTap:{scale:.95},children:(0,s.jsxs)(g,{variant:"secondary",className:"font-bold text-lg px-3 py-1",children:[(0,s.jsx)(r.P.span,{children:C})," XP"]})})]}),p<100&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center text-sm font-semibold",children:[(0,s.jsxs)("span",{className:"text-muted-foreground",children:["Progress to ",(0,s.jsxs)("span",{className:"text-primary",children:["Level ",p+1]})]}),(0,s.jsxs)("span",{className:"text-foreground",children:[(0,s.jsx)(r.P.span,{children:S})," / ",(0,s.jsx)(r.P.span,{children:D})," XP"]})]}),(0,s.jsx)(r.P.div,{initial:{width:"0%"},animate:{width:"".concat(y/j*100,"%")},transition:{duration:1.5,ease:"easeInOut"},className:"h-3 rounded-full bg-primary/20",children:(0,s.jsx)("div",{className:"h-full bg-gradient-to-r from-primary/50 to-primary rounded-full",style:{width:"100%"}})})]}),p>=100&&(0,s.jsx)(r.P.div,{className:"text-center py-2 space-y-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:1},children:(0,s.jsx)("p",{children:"\uD83C\uDFC6 Max Level Reached!"})}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4 pt-4 border-t border-border/50",children:[(0,s.jsxs)(r.P.div,{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-primary",children:(0,s.jsx)(r.P.span,{children:P})}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Unique Tracks"})]}),(0,s.jsxs)(r.P.div,{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-secondary",children:(0,s.jsx)(r.P.span,{children:A})}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:"Artists Unlocked"})]})]})]})})}var W=a(4416),K=a(5690),Q=a(4869),ee=a(3332),et=a(6758),ea=a(7489);function es(e){let{className:t,orientation:a="horizontal",decorative:r=!0,...i}=e;return(0,s.jsx)(ea.b,{"data-slot":"separator",decorative:r,orientation:a,className:m("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",t),...i})}var er=a(5659);function ei(e){let{className:t,children:a,...r}=e;return(0,s.jsxs)(er.bL,{"data-slot":"scroll-area",className:m("relative",t),...r,children:[(0,s.jsx)(er.LM,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:a}),(0,s.jsx)(en,{}),(0,s.jsx)(er.OK,{})]})}function en(e){let{className:t,orientation:a="vertical",...r}=e;return(0,s.jsx)(er.VM,{"data-slot":"scroll-area-scrollbar",orientation:a,className:m("flex touch-none p-px transition-colors select-none","vertical"===a&&"h-full w-2.5 border-l border-l-transparent","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent",t),...r,children:(0,s.jsx)(er.lr,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}let el=e=>e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"k":e.toLocaleString(),eo=e=>{var t,a;let{artist:i,onClose:n,artistDetails:l,topTracks:o,isLoading:c}=e,d=(null==l?void 0:null===(a=l.image)||void 0===a?void 0:null===(t=a.find(e=>"extralarge"===e.size))||void 0===t?void 0:t["#text"])||"/placeholder-artist.svg";return(0,s.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 overflow-y-auto",onClick:n,children:(0,s.jsxs)(r.P.div,{initial:{scale:.9,y:50,opacity:0},animate:{scale:1,y:0,opacity:1},exit:{scale:.9,y:50,opacity:0},transition:{duration:.3,type:"spring",damping:25,stiffness:200},className:"w-full max-w-2xl bg-card rounded-xl shadow-2xl relative",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)(u,{onClick:n,variant:"ghost",size:"icon",className:"absolute top-2 right-2 sm:top-4 sm:right-4 z-10 text-muted-foreground hover:bg-muted",children:(0,s.jsx)(W.A,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),c?(0,s.jsx)("div",{className:"flex items-center justify-center h-80 sm:h-96 p-8",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,s.jsx)(r.P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:(0,s.jsx)(y.A,{className:"w-10 h-10 sm:w-12 sm:h-12 text-primary"})}),(0,s.jsx)("span",{className:"text-sm sm:text-base text-muted-foreground",children:"Loading artist details..."})]})}):(0,s.jsxs)("div",{className:"overflow-hidden rounded-xl max-h-[90vh] flex flex-col",children:[(0,s.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,s.jsx)("img",{src:d,alt:i.name,className:"w-full h-48 sm:h-64 object-cover rounded-t-xl"}),(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-background/90 to-transparent"}),(0,s.jsxs)("div",{className:"absolute bottom-4 left-4 right-4",children:[(0,s.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold font-serif text-white drop-shadow-lg",children:i.name}),(0,s.jsxs)("div",{className:"inline-flex items-center gap-1.5 rounded-full bg-gradient-to-br from-primary to-accent py-1 px-3 text-xs sm:text-sm font-semibold text-white shadow-md mt-1",children:[(0,s.jsx)(K.A,{className:"w-3 h-3"}),(0,s.jsxs)("span",{children:[el(Number(i.playcount))," total plays"]})]})]})]}),(0,s.jsxs)(ei,{className:"flex-grow p-4 sm:p-6",children:[(0,s.jsx)("div",{className:"text-center mb-6",children:(0,s.jsx)(u,{asChild:!0,className:"w-full",children:(0,s.jsxs)("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2",children:[(0,s.jsx)(Q.A,{className:"w-4 h-4"}),"Last.fm"]})})}),(0,s.jsxs)("div",{className:"space-y-6",children:[(null==l?void 0:l.tags)&&l.tags.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("h3",{className:"text-lg sm:text-xl font-bold font-serif text-primary",children:[(0,s.jsx)(ee.A,{className:"inline w-4 h-4 sm:w-5 sm:h-5 mr-2"}),"Top Tags"]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:l.tags.map((e,t)=>(0,s.jsx)(g,{variant:"secondary",className:"bg-primary/20 text-primary hover:bg-primary/30 transition-colors text-xs sm:text-sm",children:e.name},t))}),(0,s.jsx)(es,{})]}),o.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("h3",{className:"text-lg sm:text-xl font-bold font-serif text-primary",children:[(0,s.jsx)(et.A,{className:"inline w-4 h-4 sm:w-5 sm:h-5 mr-2"}),"Top Tracks"]}),(0,s.jsx)("ul",{className:"space-y-2",children:o.map((e,t)=>(0,s.jsxs)("li",{className:"flex items-center gap-2 text-sm sm:text-base text-foreground",children:[(0,s.jsxs)("span",{className:"font-bold text-primary",children:[t+1,"."]}),(0,s.jsx)("span",{className:"truncate",children:e.name}),(0,s.jsxs)("div",{className:"ml-auto inline-flex items-center gap-1 py-0.5 px-2 rounded-full bg-primary/20 text-primary text-xs sm:text-sm",children:[(0,s.jsx)(K.A,{className:"w-2 h-2 sm:w-3 sm:h-3"}),(0,s.jsx)("span",{children:el(Number(e.playcount))})]})]},t))})]})]})]})]})]})})};function ec(){var e,t,a;let[l,o]=(0,n.useState)(""),[c,d]=(0,n.useState)(""),[m,x]=(0,n.useState)([]),[p,w]=(0,n.useState)(null),[k,P]=(0,n.useState)(null),[M,A]=(0,n.useState)([]),[C,S]=(0,n.useState)([]),[D,z]=(0,n.useState)(!1),[I,_]=(0,n.useState)(""),[L,E]=(0,n.useState)(!1),[G,T]=(0,n.useState)(null),[U,O]=(0,n.useState)(null),[R,B]=(0,n.useState)([]),[X,q]=(0,n.useState)(!1),H=atob("NzM1ZjI5NGU5Y2FlZjdhNjJlZDNmMjUyNmU3ODExYmI="),$=async e=>{let t="https://ws.audioscrobbler.com/2.0/?method=user.getinfo&user=".concat(e,"&api_key=").concat(H,"&format=json");try{let e=await fetch(t),a=await e.json();if(a.error)return null;return{totalPlays:Number.parseInt(a.user.playcount),tracksCount:Number.parseInt(a.user.track_count),artistCount:Number.parseInt(a.user.artist_count),memberSince:a.user.registered?Number.parseInt(a.user.registered.unixtime):null,country:a.user.country||null,userInfo:{name:a.user.name,image:a.user.image}}}catch(e){return console.error("Error fetching user info:",e),null}},W=(e,t,a)=>{let s=e.reduce((e,t)=>e+Number.parseInt(t.playcount),0),r=s/e.length,i=Math.round(Math.max(0,100-Math.sqrt(e.reduce((e,t)=>e+Math.pow(Number.parseInt(t.playcount)-r,2),0)/e.length)/r*20)),n=Math.round(e.slice(0,5).reduce((e,t)=>e+Number.parseInt(t.playcount),0)/s*100),l=Math.round(i);return{totalPlays:(null==a?void 0:a.totalPlays)||s,artistDiversity:i,explorationScore:l,loyaltyScore:n,memberSince:null==a?void 0:a.memberSince,country:null==a?void 0:a.country}},K=async e=>{if(!e.trim()){_("Please enter a username!");return}z(!0),_(""),E(!1);try{let[t,a]=await Promise.all([$(e),fetch("https://ws.audioscrobbler.com/2.0/?method=user.gettopartists&user=".concat(e,"&api_key=").concat(H,"&format=json&limit=25"))]),s=await a.json();if(s.error){_("Error: ".concat(s.message,". Please check the username.")),x([]),w(null),P(null);return}let r=s.topartists.artist||[],i=W(r,[],t);x(r),w(t),P(i),A([]),S([]),E(!0),d(l)}catch(e){console.error("Error fetching data:",e),_("Something went wrong. Please try again later."),x([]),w(null),P(null)}finally{z(!1)}},Q=async e=>{T(e),q(!0);try{var t,a,s,r;let[i,n]=await Promise.all([fetch("https://ws.audioscrobbler.com/2.0/?method=artist.getinfo&artist=".concat(encodeURIComponent(e.name),"&api_key=").concat(H,"&format=json")),fetch("https://ws.audioscrobbler.com/2.0/?method=artist.gettoptracks&artist=".concat(encodeURIComponent(e.name),"&api_key=").concat(H,"&format=json&limit=5"))]),l=await i.json(),o=await n.json(),c=(null===(s=l.artist)||void 0===s?void 0:null===(a=s.tags)||void 0===a?void 0:null===(t=a.tag)||void 0===t?void 0:t.slice(0,5))||[];T(e),O({...l.artist,tags:c}),B((null===(r=o.toptracks)||void 0===r?void 0:r.track)||[])}catch(e){console.error("Error fetching artist details:",e),O({}),B([])}finally{q(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen",children:[(0,s.jsxs)("div",{className:"absolute top-2 right-4 z-20 flex flex-col sm:flex-row items-end sm:items-center gap-2 sm:gap-3",children:[(0,s.jsx)(u,{asChild:!0,variant:"ghost",size:"sm",className:"flex items-center gap-2 bg-white/30 text-gray-800 hover:bg-purple-200 hover:text-purple-800 rounded-lg px-3 py-1 shadow-sm transition-all duration-300",children:(0,s.jsxs)("a",{href:"https://github.com/marcogarganigo/garden/issues/new/choose",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2",children:[(0,s.jsx)(f.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden sm:inline font-semibold text-sm",children:"Feedback & Issues"})]})}),(0,s.jsx)(u,{asChild:!0,variant:"ghost",size:"sm",className:"flex items-center justify-center bg-white/30 text-gray-800 hover:bg-purple-200 hover:text-purple-800 rounded-lg p-2 shadow-sm transition-all duration-300",children:(0,s.jsx)("a",{href:"https://github.com/marcogarganigo/garden",target:"_blank",rel:"noopener noreferrer","aria-label":"View on GitHub",className:"flex items-center",children:(0,s.jsx)(N,{className:"w-5 h-5"})})})]}),(0,s.jsxs)("div",{className:"relative z-10 container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"text-center mb-12",children:[(0,s.jsxs)(r.P.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},className:"flex items-center justify-center gap-3 mb-4",children:[(0,s.jsx)(v.A,{className:"w-8 h-8 text-secondary"}),(0,s.jsxs)("h1",{className:"text-5xl md:text-6xl font-serif font-black",children:[(0,s.jsx)("span",{className:"bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent transition-all duration-300 hover:scale-105",children:"Garden"}),(0,s.jsx)("span",{onClick:()=>window.location.reload(),className:"bg-gradient-to-r from-secondary to-purple-500 bg-clip-text text-transparent inline-block transition-all duration-300 hover:scale-105 cursor-pointer",children:".fm"})]}),(0,s.jsx)(b.A,{className:"w-8 h-8 text-accent animate-pulse-slow"})]}),(0,s.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3,duration:.5},className:"flex flex-col items-center gap-6 max-w-2xl mx-auto",children:(0,s.jsxs)("p",{className:"text-lg text-muted-foreground leading-relaxed",children:["Cultivate your musical ecosystem. Plant seeds from your"," ",(0,s.jsx)("a",{href:"https://last.fm",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-primary",children:"Last.fm"})," ","listening history and watch your personal garden flourish with every beat, melody, and rhythm you cherish."]})})]}),(0,s.jsxs)(r.P.form,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.5},onSubmit:e=>{e.preventDefault(),K(l)},className:"flex flex-col md:flex-row max-w-xl mx-auto items-center justify-center gap-4 mb-12",children:[(0,s.jsx)("div",{className:"flex-1 w-full",children:(0,s.jsx)(h,{id:"username",type:"text",placeholder:"Your Last.fm username...",value:l,onChange:e=>o(e.target.value),className:"h-12 text-lg border-2 border-primary/20 focus:border-primary transition-colors bg-background/50 backdrop-blur-sm",disabled:D})}),(0,s.jsx)(u,{type:"submit",disabled:D||!l.trim(),className:"cursor-pointer h-12 text-lg font-semibold px-8 bg-primary hover:bg-primary/90 transition-all duration-300",children:D?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y.A,{className:"w-5 h-5 mr-2 animate-spin"}),"Planting..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.A,{className:"w-5 h-5 mr-2"}),"Plant My Garden"]})})]}),(0,s.jsxs)(i.N,{mode:"wait",children:[I&&(0,s.jsx)(r.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.3},className:"max-w-xl mx-auto p-4 mb-8 bg-destructive/10 border border-destructive/20 rounded-lg text-center",children:(0,s.jsx)("p",{className:"text-destructive text-sm",children:I})},"error-message"),D&&(0,s.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"text-center py-16",children:(0,s.jsxs)("div",{className:"inline-flex items-center gap-3 text-lg text-muted-foreground",children:[(0,s.jsx)(y.A,{className:"w-6 h-6 animate-spin"}),"Your musical garden is taking root..."]})},"loading-state"),m.length>0&&!D&&(0,s.jsxs)(r.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,s.jsx)(J,{totalPlays:null!==(e=null==p?void 0:p.totalPlays)&&void 0!==e?e:0,artistCount:null!==(t=null==p?void 0:p.artistCount)&&void 0!==t?t:0,tracksCount:null!==(a=null==p?void 0:p.tracksCount)&&void 0!==a?a:0,gardenSize:m.length,insights:k,userInfo:null==p?void 0:p.userInfo}),(0,s.jsx)(Y,{artists:m,userStats:p}),(0,s.jsxs)("div",{className:"space-y-8 mb-12",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("h2",{className:"text-3xl font-serif font-bold text-primary mb-4",children:["\uD83C\uDF3F ",c,"'s Musical Garden"]}),(0,s.jsxs)(g,{variant:"secondary",className:"text-lg px-4 py-2",children:[m.length," flourishing plants"]})]}),(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols- gap-6",children:(0,s.jsx)(i.N,{children:m.map((e,t)=>(0,s.jsx)(r.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.3,delay:.05*t},children:(0,s.jsx)(F,{artist:e,index:t,onClick:()=>Q(e)})},"".concat(e.name,"-").concat(t)))})})]}),k&&(0,s.jsxs)("div",{className:"space-y-8 mb-12",children:[(0,s.jsx)(Z,{insights:k,topTracks:M,topAlbums:C}),(0,s.jsx)(V,{artists:m,topTracks:M,insights:k,username:l})]})]},"garden-content"),0===m.length&&!D&&L&&(0,s.jsxs)(r.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3},className:"text-center py-16",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"\uD83C\uDF31"}),(0,s.jsx)("p",{className:"text-lg text-muted-foreground",children:"No plants found for this gardener."})]},"no-plants")]}),G&&(0,s.jsx)(eo,{artist:G,onClose:()=>T(null),artistDetails:U,topTracks:R,isLoading:X})]})]})}},8190:(e,t,a)=>{Promise.resolve().then(a.bind(a,6995))}},e=>{var t=t=>e(e.s=t);e.O(0,[162,441,684,358],()=>t(8190)),_N_E=e.O()}]);